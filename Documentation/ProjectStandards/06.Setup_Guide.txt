# Unity & FishNet Setup Guide

**Zielgruppe**: Dich (Julian), beim ersten Projekt-Setup  
**Zeitaufwand**: ~2-3 Stunden  
**Voraussetzungen**: Unity Hub installiert, Git installiert

---

## Pre-Setup Checklist

```
[ ] Unity Hub installiert (neueste Version)
[ ] Unity 6000.0.62f1 verfÃ¼gbar in Hub
[ ] Visual Studio / Rider konfiguriert
[ ] Git installiert + GitHub Account
[ ] Internet-Verbindung stabil (FishNet Download)
[ ] ~10 GB freier Speicherplatz
```

---

## TEIL 1: Unity-Projekt erstellen (30 min)

### Schritt 1: Projekt anlegen

1. **Unity Hub Ã¶ffnen**
2. **Projects â†’ New Project**
3. **Einstellungen**:
   - Editor Version: `6000.0.62f1` (exakt diese Version!)
   - Template: `2D Core`
   - Project Name: `BulletHell_Multiplayer`
   - Location: `[Dein Workspace]/BulletHell_Multiplayer`

4. **Create Project** (dauert 2-5 Minuten)

### Schritt 2: Editor-Konfiguration

**Unity Ã¶ffnet automatisch. Dann:**

1. **Edit â†’ Project Settings**
   - **Player â†’ Other Settings**
     - API Compatibility Level: `.NET Framework` (WICHTIG fÃ¼r FishNet!)
     - Scripting Backend: `Mono` (oder IL2CPP fÃ¼r Performance, spÃ¤ter)
   
   - **Time**
     - Fixed Timestep: `0.02` (50Hz, siehe ADR-003)
     - Maximum Allowed Timestep: `0.1`
   
   - **Physics 2D**
     - Gravity: `0` (Top-Down, keine Gravitation)
     - Default Material: None
     - Layer Collision Matrix: (spÃ¤ter anpassen)

2. **Einstellungen speichern**: `File â†’ Save Project`

### Schritt 3: Ordnerstruktur anlegen

**Im Project-Fenster**:

```
Rechtsklick auf Assets â†’ Create â†’ Folder
```

**Erstelle folgende Struktur**:
```
Assets/
â”œâ”€â”€ _Project/                  [Root fÃ¼r alles Projektspezifische]
â”‚   â”œâ”€â”€ Scenes/
â”‚   â”‚   â”œâ”€â”€ Bootstrap/         [NetworkManager Scene]
â”‚   â”‚   â””â”€â”€ Game/              [Haupt-Spielszene]
â”‚   â”œâ”€â”€ Scripts/
â”‚   â”‚   â”œâ”€â”€ Network/           [NetworkManager, Spawner]
â”‚   â”‚   â”œâ”€â”€ Player/            [PlayerController, Health]
â”‚   â”‚   â”œâ”€â”€ Enemies/           [AI, Behavior]
â”‚   â”‚   â”œâ”€â”€ Projectiles/       [Bullet-Logik]
â”‚   â”‚   â”œâ”€â”€ UI/                [HUD, Menus]
â”‚   â”‚   â”œâ”€â”€ Persistence/       [Highscore, SQL]
â”‚   â”‚   â””â”€â”€ Utility/           [Helper-Klassen]
â”‚   â”œâ”€â”€ Prefabs/
â”‚   â”‚   â”œâ”€â”€ Player/
â”‚   â”‚   â”œâ”€â”€ Enemies/
â”‚   â”‚   â”œâ”€â”€ Projectiles/
â”‚   â”‚   â””â”€â”€ UI/
â”‚   â”œâ”€â”€ Art/
â”‚   â”‚   â”œâ”€â”€ Sprites/
â”‚   â”‚   â”œâ”€â”€ Materials/
â”‚   â”‚   â””â”€â”€ Animations/
â”‚   â”œâ”€â”€ Audio/
â”‚   â”‚   â”œâ”€â”€ SFX/
â”‚   â”‚   â””â”€â”€ Music/
â”‚   â””â”€â”€ Data/
â”‚       â””â”€â”€ ScriptableObjects/
â””â”€â”€ FishNet/                   [FishNet Package, kommt automatisch]
```

**Speichern**: `Ctrl+S` / `Cmd+S`

---

## TEIL 2: Git-Repository einrichten (20 min)

### Schritt 1: .gitignore erstellen

**BEVOR du das erste Mal commitest!**

1. **Im Projekt-Root** (auÃŸerhalb von Assets/):
   - Rechtsklick â†’ `Show in Explorer` (Windows) / `Reveal in Finder` (Mac)

2. **Neue Datei**: `.gitignore` (Punkt am Anfang!)

3. **Inhalt** (kopiere komplett):
```gitignore
# Unity Generated
[Ll]ibrary/
[Tt]emp/
[Oo]bj/
[Bb]uild/
[Bb]uilds/
[Ll]ogs/
[Uu]ser[Ss]ettings/

# Memory Captures
[Mm]emoryCaptures/

# Asset meta data should only be ignored when the corresponding asset is also ignored
!/[Aa]ssets/**/*.meta

# Uncomment if you have autosave enabled
#[Aa]ssets/[Aa]utosave/

# Visual Studio cache directory
.vs/
.vscode/

# Rider
.idea/
*.sln.iml

# Gradle cache directory
.gradle/

# Autogenerated VS/MD/Consulo solution and project files
ExportedObj/
.consulo/
*.csproj
*.unityproj
*.sln
*.suo
*.tmp
*.user
*.userprefs
*.pidb
*.booproj
*.svd
*.pdb
*.mdb
*.opendb
*.VC.db

# Unity3D generated meta files
*.pidb.meta
*.pdb.meta
*.mdb.meta

# Unity3D generated file on crash reports
sysinfo.txt

# Builds
*.apk
*.aab
*.unitypackage
*.app

# Crashlytics generated file
crashlytics-build.properties

# Packed Addressables
[Aa]ssets/[Aa]ddressable[Aa]ssets[Dd]ata/*/*.bin*

# Temporary auto-generated Android Assets
[Aa]ssets/[Ss]treamingAssets/aa.meta
[Aa]ssets/[Ss]treamingAssets/aa/*

# OS Generated
.DS_Store
Thumbs.db
```

**Speichern & SchlieÃŸen**

### Schritt 2: Git initialisieren

**Terminal/Command Prompt Ã¶ffnen** im Projekt-Root:

```bash
# Git initialisieren
git init

# Status checken (sollte KEINE Library/ oder Temp/ zeigen)
git status

# Falls doch: .gitignore ist falsch

# Alle Dateien stagen
git add .

# Initial Commit
git commit -m "Initial commit: Unity 6000.0.62f1 project setup"
```

### Schritt 3: GitHub-Repository erstellen

1. **Browser**: https://github.com
2. **New Repository**:
   - Name: `BulletHell_Multiplayer`
   - Description: `2-Player Top-Down Bullet-Hell | Unity 6 + FishNet`
   - Visibility: **Public** (Pflicht fÃ¼r Abgabe!)
   - **NICHT** "Initialize with README" (haben wir schon lokal)

3. **Create Repository**

4. **Terminal** (folge GitHub-Anleitung):
```bash
git remote add origin https://github.com/[DEIN-USERNAME]/BulletHell_Multiplayer.git
git branch -M main
git push -u origin main
```

**âœ… Checkpoint**: GitHub zeigt dein Projekt (ohne Library/)

---

## TEIL 3: FishNet installieren (45 min)

### Variante A: Asset Store (Empfohlen)

1. **Unity Editor â†’ Asset Store Tab** (oder Window â†’ Asset Store)
2. **Suche**: "Fish-Networking"
3. **FishNet (Free)** von FirstGearGames
4. **Download** â†’ **Import**
5. **Import All** (dauert 2-5 min)

### Variante B: GitHub (Fortgeschritten)

1. **Browser**: https://github.com/FirstGearGames/FishNet
2. **Releases** â†’ Neueste Version (z.B. 4.4.7R)
3. **Download** `.unitypackage`
4. **Unity**: `Assets â†’ Import Package â†’ Custom Package`
5. **Datei wÃ¤hlen** â†’ **Import All**

**âš ï¸ Import-Warnung**: MÃ¶gliche Warnings sind OK (Shader-KompatibilitÃ¤t), Errors NICHT.

### Schritt 1: FishNet Setup prÃ¼fen

Nach Import solltest du haben:
```
Assets/
â””â”€â”€ FishNet/
    â”œâ”€â”€ Demos/              [Beispiel-Projekte, spÃ¤ter ansehen]
    â”œâ”€â”€ Plugins/
    â”œâ”€â”€ Runtime/
    â””â”€â”€ ...
```

### Schritt 2: Transport-Package importieren (optional spÃ¤ter)

**FÃ¼r jetzt**: Tugboat (Default) ist schon dabei, nichts tun.

**SpÃ¤ter (fÃ¼r Steam etc.)**: FishySteamworks separat importieren.

---

## TEIL 4: NetworkManager-Szene erstellen (30 min)

### Schritt 1: Bootstrap-Szene

1. **File â†’ New Scene**
2. **Basic (Built-in)** oder **2D**
3. **Speichern**: `Assets/_Project/Scenes/Bootstrap/Bootstrap.unity`

### Schritt 2: NetworkManager GameObject

1. **Hierarchy**: Rechtsklick â†’ `Create Empty`
2. **Name**: `NetworkManager`
3. **Add Component**: `FishNet.Managing.NetworkManager`
   - Falls nicht findbar: `Fish Net â†’ Network Manager` im Dropdown

### Schritt 3: NetworkManager konfigurieren

**Im Inspector** (NetworkManager GameObject ausgewÃ¤hlt):

**a) Transport:**
- Component: `Tugboat` (sollte automatisch hinzugefÃ¼gt werden)
- Falls nicht: `Add Component â†’ Tugboat`
- **Tugboat-Settings**:
  - Port: `7770` (Default)
  - Max Clients: `2` (wir brauchen nur 2 Spieler)

**b) Spawn Settings:**
- SpÃ¤ter, wenn wir Prefabs haben

**c) Observer Manager:**
- Default-Einstellungen OK

**d) Time Manager:**
- Tick Rate: `60` (kann spÃ¤ter angepasst werden)

### Schritt 4: Bootstrap DontDestroyOnLoad

**Neues Script erstellen**:

1. **Assets/_Project/Scripts/Network/** â†’ Rechtsklick â†’ `Create â†’ C# Script`
2. **Name**: `BootstrapManager.cs`
3. **Doppelklick** (Ã¶ffnet in IDE)

**Code**:
```csharp
/*
 * Filename: BootstrapManager.cs
 * Author: Julian
 * Date: [HEUTE]
 * Description: Ensures NetworkManager persists across scene loads.
 */

using UnityEngine;

public class BootstrapManager : MonoBehaviour
{
    void Awake()
    {
        // Verhindert, dass NetworkManager beim Scene-Wechsel zerstÃ¶rt wird
        DontDestroyOnLoad(gameObject);
    }
}
```

4. **Speichern** (`Ctrl+S`)
5. **ZurÃ¼ck zu Unity** (Auto-Compile)
6. **NetworkManager GameObject** â†’ Add Component â†’ `BootstrapManager`

### Schritt 5: Game-Szene erstellen

1. **File â†’ New Scene**
2. **2D Template**
3. **Speichern**: `Assets/_Project/Scenes/Game/Game.unity`

**TemporÃ¤rer Setup**:
- Hierarchy: Rechtsklick â†’ `2D Object â†’ Sprite â†’ Square`
- Name: `Ground`
- Scale: `(50, 50, 1)` (groÃŸes Spielfeld)
- Color: Dunkelgrau (im Sprite Renderer)

### Schritt 6: Build Settings

1. **File â†’ Build Settings**
2. **Add Open Scenes** (beide: Bootstrap, Game)
3. **Reihenfolge**:
   - 0: Bootstrap
   - 1: Game
4. **Fenster schlieÃŸen** (nicht builden)

---

## TEIL 5: Erster Netzwerk-Test (30 min)

### Schritt 1: Simple Test-UI

**Bootstrap-Szene Ã¶ffnen**:

1. **Hierarchy**: Rechtsklick â†’ `UI â†’ Canvas`
2. **Canvas**: 
   - Render Mode: `Screen Space - Overlay`
3. **Rechtsklick auf Canvas** â†’ `UI â†’ Panel`
4. **Name**: `NetworkUI`

**Buttons hinzufÃ¼gen**:

1. **Rechtsklick auf NetworkUI** â†’ `UI â†’ Button - TextMeshPro`
   - Falls Prompt: "Import TMP Essentials" â†’ **Yes**
2. **Name**: `HostButton`
3. **Position**: (Center, Top-ish)
4. **Button â†’ Text (TMP)**: "Start Host"

5. **Duplizieren** (`Ctrl+D`):
   - Name: `ClientButton`
   - Text: "Start Client"
   - Position: Darunter

### Schritt 2: Network-UI Script

**Neues Script**:

1. **Assets/_Project/Scripts/Network/** â†’ `NetworkUIManager.cs`

**Code**:
```csharp
/*
 * Filename: NetworkUIManager.cs
 * Author: Julian
 * Date: [HEUTE]
 * Description: Simple UI for starting Host or Client.
 */

using FishNet.Managing;
using UnityEngine;

public class NetworkUIManager : MonoBehaviour
{
    [SerializeField] private NetworkManager networkManager;

    public void StartHost()
    {
        if (networkManager != null)
        {
            networkManager.ServerManager.StartConnection();
            networkManager.ClientManager.StartConnection();
            Debug.Log("Host started!");
        }
    }

    public void StartClient()
    {
        if (networkManager != null)
        {
            networkManager.ClientManager.StartConnection();
            Debug.Log("Client started!");
        }
    }
}
```

**In Unity**:
1. **NetworkUI GameObject** â†’ Add Component â†’ `NetworkUIManager`
2. **Inspector**:
   - Network Manager: **Drag NetworkManager GameObject hierhin**
3. **HostButton**:
   - On Click() â†’ **+**
   - Object: **NetworkUI**
   - Function: `NetworkUIManager â†’ StartHost()`
4. **ClientButton**:
   - On Click() â†’ **+**
   - Object: **NetworkUI**
   - Function: `NetworkUIManager â†’ StartClient()`

### Schritt 3: Zwei Instanzen testen

**Methode 1: ParrelSync (Empfohlen)**

1. **Asset Store**: "ParrelSync"
2. **Import**
3. **ParrelSync â†’ Clones Manager**
4. **Create new clone**
5. **Open in New Editor**

**Methode 2: Build + Editor**

1. **Build** (File â†’ Build and Run)
2. **Host** in Build starten
3. **Client** im Editor starten

**Test**:
- **Instanz 1**: "Start Host" klicken
- **Instanz 2**: "Start Client" klicken
- **Console**: "Host started!" / "Client started!"
- **NetworkManager Inspector** (Instanz 1): "Server: Running, Clients: 1"

**âœ… Checkpoint**: Beide Instanzen verbunden!

---

## TEIL 6: Git Commit + Push (10 min)

**Terminal**:
```bash
# Status prÃ¼fen
git status

# Alle neuen Dateien stagen
git add .

# Commit
git commit -m "[P1] Setup: Add FishNet and NetworkManager

- Imported FishNet 4.x from Asset Store
- Created Bootstrap scene with NetworkManager
- Added Tugboat transport configuration
- Created simple Host/Client UI for testing
- Verified two instances can connect successfully

Tested: ParrelSync clone connection works"

# Push
git push origin main
```

**âœ… GitHub prÃ¼fen**: Commit sollte sichtbar sein

---

## TEIL 7: README.md Template erstellen (15 min)

**Im Projekt-Root** (auÃŸerhalb Assets/):

**Neue Datei**: `README.md`

**Template**:
```markdown
# Bullet-Hell Multiplayer

**Student Project** | SRH Hochschule  
**Technology**: Unity 6000.0.62f1 + FishNet  
**Due Date**: 23.01.2026

---

## ðŸ“‹ Project Description

2-Player Top-Down Bullet-Hell arcade game with online multiplayer (Host + Client).

---

## ðŸš€ How to Run

### Prerequisites
- Unity 6000.0.62f1
- FishNet (included in project)

### Starting the Game

**Method 1: Two Editor Instances (ParrelSync)**
1. Install ParrelSync from Unity Asset Store
2. Create a clone via `ParrelSync â†’ Clones Manager`
3. Open Bootstrap scene in both instances
4. Instance 1: Click "Start Host"
5. Instance 2: Click "Start Client"

**Method 2: Build + Editor**
1. Build the game (File â†’ Build and Run)
2. Run the build â†’ Click "Start Host"
3. Run Unity Editor â†’ Click "Start Client"

---

## ðŸ› ï¸ Technical Overview

### Mandatory Features (80 Points)

#### âœ… Completed
- [x] FishNet Setup (10P)
- [x] NetworkManager Configuration
- [ ] Player Movement & Synchronization (15P)
- [ ] Shooting System (20P)
- [ ] Enemy System (15P)
- [ ] Health & Gameflow (10P)
- [ ] HUD & Score (10P)

#### Used RPCs
*[To be filled during development]*

#### Used SyncVars
*[To be filled during development]*

#### Bullet Logic
*[To be filled during development]*

#### Enemy Logic
*[To be filled during development]*

### Persistence
*[To be filled: PHP/SQL or JSON]*

### Bonus Features (Max 20 Points)
*[To be filled if implemented]*

---

## ðŸ› Known Issues

- None yet

---

## ðŸ“¦ Repository Structure

```
Assets/
â”œâ”€â”€ _Project/
â”‚   â”œâ”€â”€ Scenes/          # Bootstrap + Game scenes
â”‚   â”œâ”€â”€ Scripts/         # All C# scripts
â”‚   â”œâ”€â”€ Prefabs/         # NetworkObject prefabs
â”‚   â””â”€â”€ Art/             # Sprites, materials
â””â”€â”€ FishNet/             # FishNet package
```

---

## ðŸ‘¤ Author

Julian | Game & Multimedia Design Student

---

## ðŸ“… Development Log

- [DATE] Initial setup: Unity 6 + FishNet
- *[Updates will be added here]*
```

**Speichern**

**Git**:
```bash
git add README.md
git commit -m "[P1] Docs: Add README template"
git push origin main
```

---

## âœ… SETUP COMPLETE - FINAL CHECKLIST

**Phase 1 Infrastructure - Completed**:

```
[âœ“] Unity 6000.0.62f1 Projekt erstellt
[âœ“] Ordnerstruktur angelegt
[âœ“] Git-Repository (lokal + GitHub)
[âœ“] .gitignore korrekt
[âœ“] FishNet importiert
[âœ“] NetworkManager konfiguriert
[âœ“] Bootstrap-Szene funktioniert
[âœ“] Game-Szene erstellt
[âœ“] Host/Client-Test erfolgreich
[âœ“] README.md Template
[âœ“] Erstes Git Commit + Push
```

---

## ðŸŽ¯ NÃ¤chste Schritte

**â†’ PHASE 2: Player Foundation**

Siehe `02_IMPLEMENTATION_ROADMAP.md` fÃ¼r Details.

**Erste Task**: Player Prefab als NetworkObject erstellen.

---

## ðŸ“š Hilfreiche Ressourcen

**FishNet Dokumentation**:
- Offizielle Docs: https://fish-networking.gitbook.io/docs/
- Discord: https://discord.gg/Ta9HgDh4Hj
- GitHub: https://github.com/FirstGearGames/FishNet

**Unity Multiplayer**:
- Unity Manual: https://docs.unity3d.com/Manual/index.html
- FishNet Demos: `Assets/FishNet/Demos/` (im Projekt)

**Troubleshooting**:
- FishNet FAQ: https://fish-networking.gitbook.io/docs/support-and-faq
- Stack Overflow: Tag `fish-networking`
- Reddit: r/Unity3D

---

## âš ï¸ HÃ¤ufige Fehler beim Setup

### "NetworkManager not found"
**LÃ¶sung**: GameObject mit `FishNet.Managing.NetworkManager` Component erstellen.

### "Transport is null"
**LÃ¶sung**: Tugboat Component hinzufÃ¼gen (Add Component â†’ Tugboat).

### "API Compatibility Level Error"
**LÃ¶sung**: Edit â†’ Project Settings â†’ Player â†’ API Compatibility Level = `.NET Framework`

### "Git tracked Library/"
**LÃ¶sung**: 
```bash
git rm -r --cached Library/
git commit -m "Fix: Remove Library from git"
```

### "Two instances won't connect"
**LÃ¶sung**: 
- Firewall? Port 7770 freigeben
- Beide auf localhost? IP prÃ¼fen
- Tugboat Port in BEIDEN Instanzen gleich?